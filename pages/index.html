<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… ØµÙŠØ§Ù†Ø© Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„Ø§Øª</title>
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https://www.google.com; connect-src 'self' https://raw.githubusercontent.com https://api.telegram.org;">
    <link rel="stylesheet" href="../css/style.css">
    <script src="../js/ui_helpers.js"></script>
</head>

<body>

    <header>
        <img src="../assets/logo.png" alt="Logo" id="logo">
        <h1>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© </h1>
    </header>

    <main class="home">
        <div class="buttons">
            <a href="repairs.html" class="btn">Ø§Ù„ØµÙŠØ§Ù†Ù‡ </a>
            <a href="sales.html" class="btn">ğŸ’µ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</a>
            <a href="records.html" class="btn">ğŸ§¾ Ø§Ù„Ø³Ø¬Ù„</a>
            <a href="guard.html" class="btn">ğŸ›¡ï¸ ØµÙØ­Ø© Ø§Ù„Ø¬Ø§Ø±Ø¯ </a>
        </div>
    </main>

    <footer>
        <p>
            Ù„Ù„Ø§Ø³ØªÙØ³Ø§Ø± Ùˆ Ø§Ù„ØªØ¬Ø¯ÙŠØ¯ (201151473727+)
        </p>
    </footer>

</body>
<script>
    /* ===== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù„Ø§Ø²Ù… ØªØºÙŠØ±Ù‡Ø§ ÙÙ‚Ø· ===== */
    const clientID = "2"; // Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¹Ù†Ø¯Ùƒ Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ù‡Ø§Ø² Ø¯Ù‡
    const STATUS_URL = "https://raw.githubusercontent.com/Mahmuod556/status/refs/heads/main/status.json"; // Ø¶Ø¹ Ù‡Ù†Ø§ Ø±Ø§Ø¨Ø· RAW Ø§Ù„Ù„ÙŠ Ù†Ø³Ø®ØªÙ‡
    /* =================================== */

    let isOffline = false;
    let isBlockedShown = false;

    // Ø¥Ù†Ø´Ø§Ø¡ Ø·Ø¨Ù‚Ø© Ø§Ù„ØªØ­Ø°ÙŠØ± Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    const statusOverlay = document.createElement('div');
    statusOverlay.id = 'statusOverlay';
    statusOverlay.style.cssText = 'display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:white; z-index:9999; text-align:center; padding-top:50px;';
    statusOverlay.innerHTML = `
        <div id="offlineContent" style="display:none;">
            <h2 style="color:red;">âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª</h2>
            <p>Ø¨Ø±Ø¬Ø§Ø¡ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø´Ø¨ÙƒØ© Ù„Ù„ØªÙ…ÙƒÙ† Ù…Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬.</p>
            <button onclick="location.reload()" style="background:#0078d4; color:white; padding:10px 20px; border-radius:5px; cursor:pointer; border:none;">Ø¥Ø¹Ø§Ø¯Ø© Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø§ØªØµØ§Ù„</button>
        </div>
        <div id="blockedContent" style="display:none;">
            <h2 style="color:red;">ğŸš« ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬</h2>
            <p>Ø¨Ø±Ø¬Ø§Ø¡ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ.</p>
        </div>
    `;
    document.body.appendChild(statusOverlay);

    function saveOriginalContent() {
        if (!originalBodyContent) {
            originalBodyContent = document.body.innerHTML;
        }
    }

    function showOfflineScreen() {
        if (!isOffline) {
            isOffline = true;
            const overlay = document.getElementById('statusOverlay');
            overlay.style.display = 'block';
            document.getElementById('offlineContent').style.display = 'block';
            document.getElementById('blockedContent').style.display = 'none';
        }
    }

    function showBlockedScreen() {
        if (!isBlockedShown) {
            isBlockedShown = true;
            const overlay = document.getElementById('statusOverlay');
            overlay.style.display = 'block';
            document.getElementById('blockedContent').style.display = 'block';
            document.getElementById('offlineContent').style.display = 'none';
        }
    }

    function restoreOriginalContent() {
        const overlay = document.getElementById('statusOverlay');
        if (overlay) overlay.style.display = 'none';
        isOffline = false;
        isBlockedShown = false;
    }

    async function checkStatusOnline() {
        if (!navigator.onLine) return;
        try {
            const res = await fetch(STATUS_URL + "?nocache=" + Math.random(), { cache: "no-store" });
            if (!res.ok) throw new Error("status fetch failed");
            const data = await res.json();
            if (data[clientID] === "blocked") {
                showBlockedScreen();
            } else if (isBlockedShown) {
                location.reload();
            }
        } catch (e) {
            console.warn("Silent check failed:", e);
        }
    }

    function checkInternetFast() {
        if (!navigator.onLine) {
            if (!isOffline) {
                isOffline = true;
                showNotification("âš ï¸ Ø§Ù†Ù‚Ø·Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª (ØµØ§Ù…Øª)", "warning");
            }
            return;
        }
        let img = new Image();
        img.src = "https://www.google.com/favicon.ico?" + Math.random();
        img.onload = function () {
            if (isOffline) {
                isOffline = false;
                showNotification("âœ… Ø¹Ø§Ø¯ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª", "success");
                checkStatusOnline();
            }
        };
        img.onerror = function () { console.warn("Check failed"); };
    }

    setInterval(checkInternetFast, 10000);
    setInterval(checkStatusOnline, 30000);
    checkInternetFast();
    checkStatusOnline();
</script>


</html>